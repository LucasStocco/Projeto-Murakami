ğŸ“˜ Resumo â€“ Dominando JPA e Hibernate (Algaworks â€“ 2Âª EdiÃ§Ã£o)
ğŸ”¹ CapÃ­tulo 1 â€“ IntroduÃ§Ã£o ao JPA

JPA (Java Persistence API) â†’ especificaÃ§Ã£o Java para persistÃªncia de dados.

ImplementaÃ§Ãµes comuns: Hibernate, EclipseLink, OpenJPA.

Objetivo: reduzir uso de SQL â€œna mÃ£oâ€, permitindo trabalhar com objetos Java mapeados em tabelas.

ORM (Object-Relational Mapping) â†’ cada entidade Java representa uma tabela, cada atributo corresponde a uma coluna.

ğŸ”¹ CapÃ­tulo 2 â€“ Entidades

Entidade = classe Java anotada com @Entity.

Deve ter:

Construtor sem argumentos.

Identificador Ãºnico (@Id).

Chaves primÃ¡rias:

@GeneratedValue â†’ geraÃ§Ã£o automÃ¡tica (IDENTITY, SEQUENCE, TABLE, AUTO).

Mapeamento de atributos:

@Column, @Temporal, @Enumerated, @Lob.

Tipos incorporÃ¡veis: @Embeddable e @Embedded.

ğŸ”¹ CapÃ­tulo 3 â€“ Relacionamentos

Tipos:

@OneToOne â†’ 1 para 1.

@OneToMany e @ManyToOne â†’ 1 para N.

@ManyToMany â†’ N para N.

Cascading: cascade = CascadeType.ALL (propaga operaÃ§Ãµes).

Fetch types:

EAGER â†’ carrega sempre.

LAZY â†’ carrega sob demanda (recomendado para performance).

JoinColumn â†’ personalizar chave estrangeira.

MappedBy â†’ indica o lado inverso do relacionamento.

ğŸ”¹ CapÃ­tulo 4 â€“ Ciclo de Vida das Entidades

Estados de uma entidade:

Transient â†’ objeto novo, nÃ£o gerenciado.

Managed â†’ sob controle do EntityManager.

Detached â†’ jÃ¡ foi gerenciado, mas saiu do contexto.

Removed â†’ marcado para exclusÃ£o.

MÃ©todos principais do EntityManager:

persist(), merge(), remove(), find(), getReference(), flush(), clear().

ğŸ”¹ CapÃ­tulo 5 â€“ Consultas com JPQL

JPQL (Java Persistence Query Language) â†’ linguagem orientada a entidades, nÃ£o a tabelas.

Sintaxe semelhante ao SQL, mas usa nomes de classes e atributos.

Exemplo:

SELECT c FROM Cliente c WHERE c.nome = :nome


Named Queries: consultas prÃ©-definidas com @NamedQuery.

ParÃ¢metros:

Nomeados (:nome) ou posicionais (?1).

FunÃ§Ãµes: COUNT, MAX, MIN, AVG, SUM.

Join: JOIN, LEFT JOIN FETCH.

ğŸ”¹ CapÃ­tulo 6 â€“ TransaÃ§Ãµes

EntityManager trabalha dentro de uma transaÃ§Ã£o.

Em ambientes Java EE, normalmente controladas por contÃªiner.

Em aplicaÃ§Ãµes standalone, usar:

EntityTransaction tx = em.getTransaction();
tx.begin();
// operaÃ§Ãµes
tx.commit();

ğŸ”¹ CapÃ­tulo 7 â€“ Boas PrÃ¡ticas

Usar LAZY para coleÃ§Ãµes grandes.

Evitar consultas N+1 (usar JOIN FETCH).

Organizar queries em Named Queries.

Centralizar operaÃ§Ãµes de persistÃªncia em DAO/Repository.

Fechar sempre o EntityManager.

Usar DTOs para transportar dados entre camadas.

ğŸ“Œ Pontos-chave para a prova

JPA = especificaÃ§Ã£o; Hibernate Ã© implementaÃ§Ã£o.

Entidades â†’ @Entity, @Id, @GeneratedValue, @Column.

Relacionamentos â†’ @OneToOne, @OneToMany, @ManyToMany, cascade, fetch.

Ciclo de vida â†’ Transient, Managed, Detached, Removed.

EntityManager â†’ persist(), merge(), remove(), find().

JPQL â†’ orientada a objetos (Cliente em vez de tabela).

TransaÃ§Ãµes â†’ begin(), commit().

Boas prÃ¡ticas â†’ LAZY, evitar N+1, usar DTOs, Named Queries.